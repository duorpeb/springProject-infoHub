-- 25.06.13
CREATE TABLE board(
bno BIGINT AUTO_INCREMENT PRIMARY KEY,
category VARCHAR(100) NOT NULL,
title VARCHAR(300) NOT NULL,
writer VARCHAR(200) NOT NULL,
content TEXT,
is_del VARCHAR(5) DEFAULT 'N',
reg_date DATETIME DEFAULT NOW(),
views INT DEFAULT 0,
cmt_cnt INT DEFAULT 0,
report_cnt INT DEFAULT 0,
recommend INT DEFAULT 0,

FOREIGN KEY(writer) REFERENCES user(nick_name) ON DELETE CASCADE
);


CREATE TABLE user(
id VARCHAR(256) PRIMARY KEY,
email VARCHAR(256) NOT NULL, 
pwd VARCHAR(256) NOT NULL,
nick_name VARCHAR(256) UNIQUE,
terms VARCHAR(5) NOT NULL DEFAUTL 'Y',
user_ban VARCHAR(5) DEFAULT 'N',
ban_days INT DEFAULT 0,
file_name VARCHAR(256),
save_dir VARCHAR(256)
);


CREATE TABLE  file(
bno BIGINT NOT NULL,
uuid VARCHAR(256) PRIMARY KEY,
save_dir VARCHAR(256) NOT NULL,
file_name VARCHAR(256) NOT NULL,
file_type TINYINT(1) DEFAULT 0,
file_size BIGINT,
reg_date DATETIME DEFAULT NOW()
);
 

CREATE TABLE auth(
auth_no BIGINT AUTO_INCREMENT PRIMARY KEY,
id VARCHAR(256) NOT NULL,
auth VARCHAR(30) NOT NULL,
FOREIGN KEY(id) REFERENCES user(id) ON DELETE CASCADE
);


CREATE TABLE bookmark(
bookmark_no BIGINT AUTO_INCREMENT PRIMARY KEY,
bno BIGINT NOT NULL,
id VARCHAR(256) NOT NULL,
reg_date DATETIME DEFAULT NOW(),
FOREIGN KEY(bno) REFERENCES board(bno) ON DELETE CASCADE,
FOREIGN KEY(id) REFERENCES user(id) ON DELETE CASCADE
);


CREATE TABLE comment(
cno BIGINT AUTO_INCREMENT PRIMARY KEY,
bno BIGINT NOT NULL,
writer VARCHAR(500) NOT NULL,
content TEXT,
reg_date DATETIME DEFAULT NOW(),
file_name VARCHAR(256),
edited VARCHAR(10),
FOREIGN KEY(writer) REFERENCES user(nick_name) ON DELETE CASCADE
);



-- 25.07.01
ALTER TABLE comment ADD file_name VARCHAR(256);
ALTER TABLE comment ADD edited VARCHAR(10) DEFAULT 'N';


CREATE TABLE likes(
like_no BIGINT AUTO_INCREMENT PRIMARY KEY,
user_id VARCHAR(256),
board_bno BIGINT
);






